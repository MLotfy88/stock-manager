# أنماط النظام (System Patterns)

## 1. بنية الواجهة الأمامية (Frontend Architecture)
- **بنية قائمة على المكونات (Component-Based):** التطبيق يتبع بنية React القائمة على تقسيم الواجهة إلى مكونات صغيرة وقابلة لإعادة الاستخدام.
- **فصل الاهتمامات (Separation of Concerns):**
    - **المكونات (`src/components`):** مسؤولة عن العرض فقط (UI).
    - **الصفحات (`src/pages`):** مسؤولة عن تجميع المكونات وبناء تخطيط الصفحات.
    - **المنطق (`src/data/operations`):** يحتوي على منطق التعامل مع البيانات، مما يفصله عن واجهة المستخدم.
    - **الأنواع (`src/types`):** تعريفات TypeScript مركزية لضمان سلامة البيانات في جميع أنحاء التطبيق.

## 2. نمط إدارة الحالة (State Management Pattern)
- **الحالة المحلية (Local State):** تُستخدم `useState` لإدارة الحالة داخل المكونات الفردية (مثل حقول النماذج).
- **الحالة المشتركة (Shared State):** تُستخدم `Context API` (`LanguageContext`) لمشاركة الحالة العامة عبر التطبيق، مثل لغة الواجهة.
- **حالة الخادم (Server State):** تُستخدم `@tanstack/react-query` لإدارة دورة حياة بيانات الخادم (الجلب، التخزين المؤقت، التحديث)، على الرغم من أن "الخادم" حاليًا هو `localStorage`. هذا النمط يجعل الانتقال إلى خادم حقيقي أسهل.

## 3. نمط تخزين البيانات (Data Storage Pattern)
- **الوضع الحالي (localStorage):** التطبيق يستخدم `localStorage` كقاعدة بيانات مؤقتة تعمل على جانب العميل. يتم تحميل جميع البيانات في الذاكرة عند بدء التشغيل وحفظها مرة أخرى عند كل تغيير.
- **الوضع المستقبلي (Supabase):** تم تصميم التطبيق ليكون قابلاً للتطوير. تم إضافة واجهة في صفحة الإعدادات للتحول إلى استخدام Supabase كخادم خلفي، حيث سيتم استبدال العمليات التي تتعامل مع `localStorage` بعمليات API تتصل بـ Supabase.

## 4. نمط التوجيه (Routing Pattern)
- **توجيه مركزي:** يتم تعريف جميع مسارات التطبيق في ملف واحد (`src/App.tsx`) باستخدام `react-router-dom`، مما يوفر نقطة تحكم واحدة وواضحة للتنقل في التطبيق.
